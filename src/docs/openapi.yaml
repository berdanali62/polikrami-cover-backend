openapi: 3.0.3
info:
  title: Polikrami Cover API
  description: |
    # ğŸ¨ Polikrami Cover - E-Ticaret & Ã–zel TasarÄ±m API'si
    
    **Versiyon:** 1.0.0  
    **Son GÃ¼ncelleme:** 30 Ekim 2025  
    **Lisans:** Proprietary
    
    ## ğŸ“– Genel BakÄ±ÅŸ
    
    Polikrami Cover API, Ã¶zel tasarlanmÄ±ÅŸ kaÄŸÄ±t Ã¼rÃ¼nler (Ã¶zel mesaj kartlarÄ±, kapak tasarÄ±mlarÄ±) iÃ§in eksiksiz bir e-ticaret deneyimi saÄŸlar. API ÅŸunlarÄ± destekler:
    
    - ğŸ¨ **Ã–zel TasarÄ±m Ä°ÅŸ AkÄ±ÅŸlarÄ±:** Upload, AI-generated veya sanatÃ§Ä± destekli tasarÄ±mlar
    - ğŸ‘¥ **KullanÄ±cÄ± & Rol YÃ¶netimi:** Customer, Designer ve Admin rolleri
    - ğŸ’³ **Ã–deme Entegrasyonu:** Iyzico ve Ã§oklu Ã¶deme yÃ¶ntemleri
    - ğŸ“¦ **Kargo Takibi:** GerÃ§ek zamanlÄ± kargo durumu ve webhook entegrasyonlarÄ±
    - ğŸ¤– **AI Ãœretimi:** Stability AI ile otomatik tasarÄ±m oluÅŸturma
    - ğŸ’° **Kredi Sistemi:** Sanal cÃ¼zdan ve transaction yÃ¶netimi
    
    ## ğŸ” GÃ¼venlik
    
    - **JWT Authentication:** Access token (15 dakika) + Refresh token (30 gÃ¼n)
    - **CSRF Protection:** TÃ¼m state-changing operasyonlarda gerekli
    - **Rate Limiting:** Endpoint bazÄ±nda farklÄ± limitler
    - **HTTPS Only:** Production'da zorunlu
    
    ## ğŸš€ BaÅŸlangÄ±Ã§
    
    1. **KayÄ±t Olun:** `POST /api/v1/auth/register`
    2. **GiriÅŸ YapÄ±n:** `POST /api/v1/auth/login`
    3. **Token KullanÄ±n:** Authorization header'Ä±nda `Bearer {token}` ekleyin
    4. **Ä°ÅŸlem YapÄ±n:** KorumalÄ± endpoint'lere eriÅŸin
    
    ## ğŸ“ Ä°letiÅŸim
    
    - **Website:** https://polikrami.com
    - **Support Email:** support@polikrami.com
    - **API Status:** https://status.polikrami.com
    
  version: 1.0.0
  contact:
    name: Polikrami API Support
    email: support@polikrami.com
    url: https://polikrami.com
  license:
    name: Proprietary
    url: https://polikrami.com/terms

servers:
  - url: https://api.polikrami.com/api/v1
    description: Production Server
  - url: http://localhost:3000/api/v1
    description: Local Development Server

tags:
  - name: Authentication
    description: |
      Kimlik doÄŸrulama iÅŸlemleri. JWT tabanlÄ± access/refresh token sistemi kullanÄ±r.
      
      **AkÄ±ÅŸ:**
      1. Register/Login â†’ Access Token + Refresh Token alÄ±rsÄ±nÄ±z
      2. Access Token ile API Ã§aÄŸrÄ±larÄ± yaparsÄ±nÄ±z
      3. Access Token expire olduÄŸunda refresh endpoint'i ile yenilersiniz
      
  - name: Users
    description: |
      KullanÄ±cÄ± profili yÃ¶netimi, ÅŸifre deÄŸiÅŸtirme, telefon doÄŸrulama.
      
  - name: Drafts
    description: |
      Taslak sipariÅŸ oluÅŸturma ve yÃ¶netme. 3 yÃ¶ntem desteklenir:
      - **upload:** KullanÄ±cÄ± kendi dosyasÄ±nÄ± yÃ¼kler
      - **ai:** AI ile otomatik oluÅŸturma
      - **artist:** TasarÄ±mcÄ± ile Ã§alÄ±ÅŸma
      
  - name: Orders
    description: |
      SipariÅŸ yÃ¶netimi, durum takibi, iptal iÅŸlemleri.
      
  - name: Payments
    description: |
      Ã–deme iÅŸlemleri (Iyzico entegrasyonu), geri Ã¶deme, durum kontrolleri.
      
  - name: Designers
    description: |
      TasarÄ±mcÄ± profilleri, arama, yorumlar ve deÄŸerlendirmeler.
      
  - name: Addresses
    description: |
      Teslimat adresleri yÃ¶netimi. KullanÄ±cÄ± baÅŸÄ±na max 10 adres.
      
  - name: Wallet
    description: |
      Sanal cÃ¼zdan sistemi. Kredi satÄ±n alma, harcama, transaction geÃ§miÅŸi.
      
  - name: Shipments
    description: |
      Kargo takip sistemi. GerÃ§ek zamanlÄ± durum gÃ¼ncellemeleri ve webhook desteÄŸi.
      
  - name: Templates
    description: |
      TasarÄ±m ÅŸablonlarÄ±. Public listleme ve admin yÃ¶netimi.
      
  - name: Categories
    description: |
      ÃœrÃ¼n kategorileri. Public listleme ve admin yÃ¶netimi.
      
  - name: Search
    description: |
      Global arama (templates, designers, projects) ve autocomplete Ã¶nerileri.
      
  - name: AI
    description: |
      AI tabanlÄ± tasarÄ±m Ã¼retimi (Stability AI entegrasyonu).
      
  - name: Likes
    description: |
      Mesaj kartÄ± beÄŸeni sistemi. Public ve authenticated kullanÄ±cÄ±lar.
      
  - name: Comments
    description: |
      Proje yorumlarÄ± ve deÄŸerlendirmeler.
      
  - name: Notifications
    description: |
      KullanÄ±cÄ± bildirimleri. Push notification desteÄŸi.
      
  - name: Message Cards
    description: |
      PopÃ¼ler mesaj kartlarÄ± kataloÄŸu.
      
  - name: Projects
    description: |
      Ã‡oklu kullanÄ±cÄ±lÄ± proje yÃ¶netimi.
      
  - name: Organizations
    description: |
      Organizasyon ve team yÃ¶netimi.
      
  - name: Returns
    description: |
      Ä°ade talepleri ve sÃ¼reÃ§ yÃ¶netimi.
      
  - name: Assets
    description: |
      YÃ¼klenmiÅŸ dosya (asset) yÃ¶netimi.
      
  - name: Locations
    description: |
      TÃ¼rkiye il/ilÃ§e/mahalle hiyerarÅŸisi (adres iÃ§in).
      
  - name: Contact
    description: |
      Ä°letiÅŸim formu gÃ¶nderimi.

paths:
  # =============================================================================
  # HEALTH CHECK
  # =============================================================================
  /health:
    get:
      summary: Health Check
      description: API durumunu kontrol eder. Monitoring iÃ§in kullanÄ±lÄ±r.
      tags: [Health]
      responses:
        '200':
          description: API saÄŸlÄ±klÄ± Ã§alÄ±ÅŸÄ±yor
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                  timestamp:
                    type: string
                    format: date-time
                  uptime:
                    type: number
                    description: Saniye cinsinden Ã§alÄ±ÅŸma sÃ¼resi

  # =============================================================================
  # AUTHENTICATION
  # =============================================================================
  /auth/register:
    post:
      summary: KullanÄ±cÄ± KaydÄ±
      description: |
        Yeni kullanÄ±cÄ± hesabÄ± oluÅŸturur. Email doÄŸrulama linki otomatik gÃ¶nderilir.
        
        **Ã–nemli:**
        - Email benzersiz olmalÄ±
        - Åifre en az 8 karakter, 1 bÃ¼yÃ¼k harf, 1 kÃ¼Ã§Ã¼k harf, 1 rakam iÃ§ermeli
        - `acceptTerms` ve `acceptPrivacy` true olmalÄ±
        - Designer rolÃ¼ iÃ§in `acceptRevenueShare` true olmalÄ±
        
        **Rate Limit:** 5 kayÄ±t/saat per IP
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
            examples:
              customer:
                summary: MÃ¼ÅŸteri KaydÄ±
                value:
                  email: john.doe@example.com
                  password: SecureP@ss123
                  confirmPassword: SecureP@ss123
                  name: John Doe
                  role: user
                  acceptTerms: true
                  acceptPrivacy: true
              designer:
                summary: TasarÄ±mcÄ± KaydÄ±
                value:
                  email: jane.designer@example.com
                  password: Design@123
                  confirmPassword: Design@123
                  name: Jane Designer
                  role: designer
                  acceptTerms: true
                  acceptPrivacy: true
                  acceptRevenueShare: true
      responses:
        '201':
          description: KayÄ±t baÅŸarÄ±lÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          description: Email zaten kayÄ±tlÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: Bu email adresi zaten kayÄ±tlÄ±.
                code: EMAIL_ALREADY_EXISTS
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /auth/login:
    post:
      summary: GiriÅŸ Yap
      description: |
        Email ve ÅŸifre ile giriÅŸ yapar. Access token ve refresh token dÃ¶ndÃ¼rÃ¼r.
        
        **Token Bilgileri:**
        - Access Token: 15 dakika geÃ§erli
        - Refresh Token: 30 gÃ¼n geÃ§erli
        - Remember me: true ise cookie'ler persistent olur
        
        **Rate Limit:** 10 deneme/dakika per IP
        **Account Lock:** 5 baÅŸarÄ±sÄ±z denemeden sonra 15 dakika kilit
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: GiriÅŸ baÅŸarÄ±lÄ±
          headers:
            Set-Cookie:
              description: Authentication cookies
              schema:
                type: string
                example: access=eyJhbGc...; refresh=eyJhbGc...; remember=1
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Email veya ÅŸifre hatalÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: Email veya ÅŸifre hatalÄ±
                code: INVALID_CREDENTIALS
        '423':
          description: Hesap kilitli (Ã§ok fazla baÅŸarÄ±sÄ±z deneme)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: HesabÄ±nÄ±z 15 dakika sÃ¼reyle kilitlendi
                code: ACCOUNT_LOCKED
                unlockAt: '2025-10-30T14:45:00Z'

  /auth/refresh:
    post:
      summary: Token Yenile
      description: |
        Refresh token kullanarak yeni access token alÄ±r.
        
        **KullanÄ±m:**
        1. Access token expire olduÄŸunda bu endpoint'i Ã§aÄŸÄ±rÄ±n
        2. Cookie veya body'den refresh token gÃ¶nderilir
        3. Yeni access ve refresh token alÄ±rsÄ±nÄ±z
      tags: [Authentication]
      security:
        - cookieAuth: []
      responses:
        '200':
          description: Token yenilendi
          headers:
            Set-Cookie:
              schema:
                type: string
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  accessToken:
                    type: string
                  refreshToken:
                    type: string
        '401':
          $ref: '#/components/responses/Unauthorized'

  /auth/logout:
    post:
      summary: Ã‡Ä±kÄ±ÅŸ Yap
      description: |
        Aktif refresh token'larÄ± revoke eder ve cookie'leri temizler.
      tags: [Authentication]
      security:
        - bearerAuth: []
        - cookieAuth: []
      responses:
        '200':
          description: Ã‡Ä±kÄ±ÅŸ baÅŸarÄ±lÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: BaÅŸarÄ±yla Ã§Ä±kÄ±ÅŸ yaptÄ±nÄ±z

  /auth/forgot-password:
    post:
      summary: Åifre SÄ±fÄ±rlama Talebi
      description: |
        Åifre sÄ±fÄ±rlama kodu email'e gÃ¶nderilir.
        
        **GÃ¼venlik:**
        - Email enumeration korumalÄ± (her zaman aynÄ± mesaj dÃ¶ner)
        - Code 10 dakika geÃ§erli
        - Rate limited: 3 istek/saat
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                  format: email
      responses:
        '200':
          description: BaÅŸarÄ±lÄ± (email exists olsun olmasÄ±n)
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: EÄŸer bu email kayÄ±tlÄ±ysa, ÅŸifre sÄ±fÄ±rlama kodu gÃ¶nderildi

  /auth/verify-reset-code:
    post:
      summary: SÄ±fÄ±rlama Kodu DoÄŸrulama
      description: Email'e gelen kodu doÄŸrular
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, code]
              properties:
                email:
                  type: string
                  format: email
                code:
                  type: string
                  example: '123456'
      responses:
        '200':
          description: Kod geÃ§erli
        '400':
          description: Kod geÃ§ersiz veya expired

  /auth/reset-password:
    post:
      summary: Åifreyi SÄ±fÄ±rla
      description: DoÄŸrulanmÄ±ÅŸ kod ile yeni ÅŸifre belirlenir
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email, code, password, confirmPassword]
              properties:
                email:
                  type: string
                  format: email
                code:
                  type: string
                password:
                  type: string
                  minLength: 8
                confirmPassword:
                  type: string
      responses:
        '200':
          description: Åifre baÅŸarÄ±yla deÄŸiÅŸtirildi
        '400':
          description: Kod geÃ§ersiz veya ÅŸifreler eÅŸleÅŸmiyor

  /auth/resend-verification:
    post:
      summary: Email DoÄŸrulama Linkini Tekrar GÃ¶nder
      description: |
        Email doÄŸrulama linki tekrar gÃ¶nderilir.
        Rate limit: 3 istek/saat
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [email]
              properties:
                email:
                  type: string
                  format: email
      responses:
        '200':
          description: DoÄŸrulama linki gÃ¶nderildi

  /auth/verify-email:
    post:
      summary: Email DoÄŸrula
      description: Email doÄŸrulama linkindeki token'Ä± validate eder
      tags: [Authentication]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [token]
              properties:
                token:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Email doÄŸrulandÄ±
        '400':
          description: Token geÃ§ersiz veya expired

  # =============================================================================
  # USERS
  # =============================================================================
  /users/me:
    get:
      summary: Profil Bilgilerim
      description: Oturum aÃ§mÄ±ÅŸ kullanÄ±cÄ±nÄ±n profil bilgilerini getirir
      tags: [Users]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profil bilgileri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        '401':
          $ref: '#/components/responses/Unauthorized'

    put:
      summary: Profilimi GÃ¼ncelle
      description: |
        Profil bilgilerini gÃ¼nceller. Email deÄŸiÅŸtirilemez.
        
        **GÃ¼ncellenebilir Alanlar:**
        - name, phone, company, address, preferences
      tags: [Users]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileRequest'
      responses:
        '200':
          description: Profil gÃ¼ncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'

  /users/me/change-password:
    post:
      summary: Åifre DeÄŸiÅŸtir
      description: |
        Mevcut ÅŸifre doÄŸrulanarak yeni ÅŸifre belirlenir.
        
        **GÃ¼venlik:**
        - Eski ÅŸifre zorunlu
        - Yeni ÅŸifre complexity rules'a uymalÄ±
      tags: [Users]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [currentPassword, newPassword, confirmNewPassword]
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
                  minLength: 8
                confirmNewPassword:
                  type: string
      responses:
        '200':
          description: Åifre deÄŸiÅŸtirildi
        '400':
          description: Mevcut ÅŸifre hatalÄ± veya yeni ÅŸifreler eÅŸleÅŸmiyor

  /users/phone/send-code:
    post:
      summary: Telefon DoÄŸrulama Kodu GÃ¶nder
      description: |
        SMS ile telefon doÄŸrulama kodu gÃ¶nderir.
        Rate limit: 3 istek/saat
      tags: [Users]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [phone]
              properties:
                phone:
                  type: string
                  example: '+905551234567'
      responses:
        '200':
          description: Kod gÃ¶nderildi
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /users/phone/verify:
    post:
      summary: Telefon DoÄŸrulama Kodu Kontrol
      description: SMS ile gelen kodu doÄŸrular
      tags: [Users]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [code]
              properties:
                code:
                  type: string
                  example: '123456'
      responses:
        '200':
          description: Telefon doÄŸrulandÄ±
        '400':
          description: Kod geÃ§ersiz

  # =============================================================================
  # DRAFTS
  # =============================================================================
  /drafts:
    post:
      summary: Yeni Taslak OluÅŸtur
      description: |
        Yeni bir sipariÅŸ taslaÄŸÄ± oluÅŸturur. 3 yÃ¶ntem desteklenir:
        
        - **upload:** KullanÄ±cÄ± kendi dosyasÄ±nÄ± yÃ¼kler
        - **ai:** AI ile otomatik tasarÄ±m oluÅŸturur
        - **artist:** TasarÄ±mcÄ± ile birlikte Ã§alÄ±ÅŸÄ±r
        
        **Ä°ÅŸ AkÄ±ÅŸÄ±:**
        1. Draft oluÅŸtur (step=1)
        2. DetaylarÄ± doldur (message card, shipping, etc.)
        3. Commit iÅŸlemi â†’ Order'a dÃ¶nÃ¼ÅŸÃ¼r
      tags: [Drafts]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [method]
              properties:
                method:
                  type: string
                  enum: [upload, ai, artist]
                  description: TasarÄ±m yÃ¶ntemi
            examples:
              upload:
                summary: Upload YÃ¶ntemi
                value:
                  method: upload
              ai:
                summary: AI YÃ¶ntemi
                value:
                  method: ai
              artist:
                summary: TasarÄ±mcÄ± YÃ¶ntemi
                value:
                  method: artist
      responses:
        '201':
          description: Taslak oluÅŸturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Draft'
        '402':
          description: Yetersiz kredi (AI iÃ§in)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: Yetersiz kredi
                code: INSUFFICIENT_CREDITS
                required: 50
                current: 20

    get:
      summary: Taslak Listele
      description: |
        KullanÄ±cÄ±nÄ±n tÃ¼m taslaklarÄ±nÄ± listeler.
        
        **Filtreleme:**
        - method, status, date range
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: method
          in: query
          schema:
            type: string
            enum: [upload, ai, artist]
        - name: status
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Taslak listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  drafts:
                    type: array
                    items:
                      $ref: '#/components/schemas/Draft'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /drafts/{id}:
    get:
      summary: Taslak Detay
      description: Belirli bir taslaÄŸÄ±n detaylarÄ±nÄ± getirir
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      responses:
        '200':
          description: Taslak detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DraftDetail'
        '404':
          $ref: '#/components/responses/NotFound'

    put:
      summary: Taslak GÃ¼ncelle
      description: |
        Taslak bilgilerini gÃ¼nceller. Step bazlÄ± ilerleme.
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                step:
                  type: integer
                  description: Taslak adÄ±mÄ± (1-5)
                data:
                  type: object
                  description: AdÄ±ma Ã¶zgÃ¼ data
                messageCardId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Taslak gÃ¼ncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Draft'

  /drafts/{id}/message-card:
    post:
      summary: Mesaj KartÄ± SeÃ§
      description: Taslak iÃ§in mesaj kartÄ± seÃ§imi yapar
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [messageCardId]
              properties:
                messageCardId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Mesaj kartÄ± seÃ§ildi

  /drafts/{id}/shipping:
    post:
      summary: Kargo Bilgisi Ekle
      description: |
        Taslak iÃ§in kargo bilgisi ekler.
        
        **Ä°ki seÃ§enek:**
        1. Bu endpoint: Manuel address giriÅŸi
        2. `/shipping/address`: KayÄ±tlÄ± addressten seÃ§im
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressInput'
      responses:
        '200':
          description: Kargo bilgisi eklendi

  /drafts/{id}/shipping/address:
    post:
      summary: KayÄ±tlÄ± Adresten Kargo Bilgisi Ekle
      description: KullanÄ±cÄ±nÄ±n kayÄ±tlÄ± adreslerinden birini seÃ§er
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [addressId]
              properties:
                addressId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: Adres seÃ§ildi

  /drafts/{id}/billing:
    post:
      summary: Fatura Adresi Ekle
      description: |
        Fatura adresi ekler. VarsayÄ±lan olarak kargo adresi ile aynÄ±dÄ±r.
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressInput'
      responses:
        '200':
          description: Fatura adresi eklendi

  /drafts/{id}/upload:
    post:
      summary: Dosya YÃ¼kle
      description: |
        Taslak iÃ§in dosya yÃ¼kler (upload method iÃ§in).
        
        **Desteklenen Formatlar:** PNG, JPG, WEBP, PDF  
        **Maksimum Boyut:** 100MB
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: Dosya yÃ¼klendi
          content:
            application/json:
              schema:
                type: object
                properties:
                  assetId:
                    type: string
                    format: uuid
                  url:
                    type: string
        '413':
          description: Dosya Ã§ok bÃ¼yÃ¼k
        '415':
          description: Desteklenmeyen format

  /drafts/{id}/assign-designer:
    post:
      summary: TasarÄ±mcÄ± Ata
      description: |
        Taslak iÃ§in tasarÄ±mcÄ± atar (artist method iÃ§in).
        
        **KoÅŸullar:**
        - Method 'artist' olmalÄ±
        - TasarÄ±mcÄ± aktif olmalÄ±
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [designerId]
              properties:
                designerId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: TasarÄ±mcÄ± atandÄ±
        '400':
          description: GeÃ§ersiz method veya tasarÄ±mcÄ±
        '409':
          description: TasarÄ±mcÄ± zaten atanmÄ±ÅŸ

  /drafts/{id}/preview:
    post:
      summary: Ã–nizleme GÃ¶nder (TasarÄ±mcÄ±)
      description: |
        TasarÄ±mcÄ± mÃ¼ÅŸteriye Ã¶nizleme gÃ¶nderir.
        
        **Yetki:** Sadece atanmÄ±ÅŸ tasarÄ±mcÄ± veya admin
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required: [file]
              properties:
                file:
                  type: string
                  format: binary
                note:
                  type: string
      responses:
        '200':
          description: Ã–nizleme gÃ¶nderildi
        '403':
          $ref: '#/components/responses/Forbidden'

  /drafts/{id}/revision:
    post:
      summary: Revizyon Talebi (MÃ¼ÅŸteri)
      description: |
        MÃ¼ÅŸteri tasarÄ±mcÄ±dan revizyon talep eder.
        
        **Limitler:**
        - Maksimum 3 revizyon hakkÄ±
        - Her revizyon iÃ§in aÃ§Ä±klama zorunlu
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [note]
              properties:
                note:
                  type: string
                  minLength: 10
                  maxLength: 500
      responses:
        '200':
          description: Revizyon talebi gÃ¶nderildi
        '400':
          description: Revizyon hakkÄ± dolmuÅŸ

  /drafts/{id}/approve:
    post:
      summary: TasarÄ±mÄ± Onayla (MÃ¼ÅŸteri)
      description: |
        MÃ¼ÅŸteri final tasarÄ±mÄ± onaylar. ArtÄ±k revizyon yapÄ±lamaz.
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      responses:
        '200':
          description: TasarÄ±m onaylandÄ±

  /drafts/{id}/cancel:
    post:
      summary: Taslak Ä°ptal Et
      description: |
        Taslak iptal edilir. Ä°ptal nedeni belirtilmelidir.
        
        **Not:** Commit edildikten sonra iptal edilemez.
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  maxLength: 500
      responses:
        '200':
          description: Taslak iptal edildi
        '400':
          description: Taslak zaten commit edilmiÅŸ

  /drafts/{id}/commit:
    post:
      summary: Taslak SipariÅŸe DÃ¶nÃ¼ÅŸtÃ¼r
      description: |
        Taslak commit edilerek Order'a dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lÃ¼r.
        
        **KoÅŸullar:**
        - TÃ¼m zorunlu alanlar dolu olmalÄ±
        - Method'a gÃ¶re approval/preview gÃ¶nderilmiÅŸ olmalÄ±
        - Yeterli kredi/bakiye olmalÄ±
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      responses:
        '200':
          description: SipariÅŸ oluÅŸturuldu
          content:
            application/json:
              schema:
                type: object
                properties:
                  orderId:
                    type: string
                    format: uuid
                  message:
                    type: string
                    example: SipariÅŸ baÅŸarÄ±yla oluÅŸturuldu
        '400':
          description: Eksik bilgi veya yetersiz kredi

  /drafts/{id}/workflow-history:
    get:
      summary: Ä°ÅŸ AkÄ±ÅŸÄ± GeÃ§miÅŸi
      description: |
        TaslaÄŸÄ±n workflow geÃ§miÅŸini (revisions, approvals) getirir.
      tags: [Drafts]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      responses:
        '200':
          description: Workflow geÃ§miÅŸi
          content:
            application/json:
              schema:
                type: object
                properties:
                  history:
                    type: array
                    items:
                      type: object
                      properties:
                        status:
                          type: string
                        timestamp:
                          type: string
                          format: date-time
                        actor:
                          type: string
                        note:
                          type: string

  # =============================================================================
  # ORDERS
  # =============================================================================
  /orders:
    get:
      summary: SipariÅŸlerimi Listele
      description: |
        KullanÄ±cÄ±nÄ±n tÃ¼m sipariÅŸlerini listeler.
        
        **Filtreleme:**
        - status, date range
      tags: [Orders]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, paid, processing, shipped, delivered, canceled, refunded]
      responses:
        '200':
          description: SipariÅŸ listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  orders:
                    type: array
                    items:
                      $ref: '#/components/schemas/Order'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /orders/{id}:
    get:
      summary: SipariÅŸ Detay
      description: |
        Belirli bir sipariÅŸin detaylarÄ±nÄ± getirir.
        
        **Ä°Ã§erik:**
        - SipariÅŸ bilgileri
        - Ã–deme durumu
        - Kargo bilgisi
        - Line items
      tags: [Orders]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      responses:
        '200':
          description: SipariÅŸ detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OrderDetail'
        '404':
          $ref: '#/components/responses/NotFound'

  /orders/{id}/cancel:
    post:
      summary: SipariÅŸ Ä°ptal Et
      description: |
        SipariÅŸ iptal edilir. Ä°ptal koÅŸullarÄ±:
        - Ã–deme yapÄ±lmamÄ±ÅŸ veya
        - Kargo hazÄ±rlÄ±ÄŸÄ±na geÃ§memiÅŸ
        
        **Ä°ade:** Ã–deme yapÄ±ldÄ±ysa otomatik iade baÅŸlatÄ±lÄ±r.
      tags: [Orders]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/OrderIdParam'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  maxLength: 500
      responses:
        '200':
          description: SipariÅŸ iptal edildi
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  refundId:
                    type: string
                    format: uuid
                    description: Varsa iade ID'si
        '400':
          description: SipariÅŸ iptal edilemez (kargo Ã§Ä±kmÄ±ÅŸ vs.)

  # =============================================================================
  # PAYMENTS
  # =============================================================================
  /payments/initiate:
    post:
      summary: Ã–deme BaÅŸlat
      description: |
        SipariÅŸ iÃ§in Ã¶deme iÅŸlemi baÅŸlatÄ±r.
        
        **Desteklenen YÃ¶ntemler:**
        - credit_card: Kredi kartÄ± (3D Secure)
        - bank_transfer: Havale/EFT
        - wallet: CÃ¼zdan kredisi
        
        **AkÄ±ÅŸ:**
        1. Payment oluÅŸtur
        2. Provider'a yÃ¶nlendir (3D Secure iÃ§in)
        3. Callback ile sonuÃ§ al
        4. Order durumu gÃ¼ncellenir
      tags: [Payments]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, paymentMethod]
              properties:
                orderId:
                  type: string
                  format: uuid
                paymentMethod:
                  type: string
                  enum: [credit_card, bank_transfer, wallet]
                returnUrl:
                  type: string
                  format: uri
                  description: 3D Secure sonrasÄ± dÃ¶nÃ¼ÅŸ URL'i
                cancelUrl:
                  type: string
                  format: uri
            examples:
              credit_card:
                summary: Kredi KartÄ±
                value:
                  orderId: 550e8400-e29b-41d4-a716-446655440000
                  paymentMethod: credit_card
                  returnUrl: https://myapp.com/payment/success
                  cancelUrl: https://myapp.com/payment/cancel
              wallet:
                summary: CÃ¼zdan
                value:
                  orderId: 550e8400-e29b-41d4-a716-446655440000
                  paymentMethod: wallet
      responses:
        '201':
          description: Ã–deme baÅŸlatÄ±ldÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  paymentId:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum: [pending, redirecting, processing]
                  redirectUrl:
                    type: string
                    format: uri
                    description: 3D Secure redirect URL (varsa)
                  message:
                    type: string
              examples:
                redirect_3d:
                  summary: 3D Secure Redirect
                  value:
                    paymentId: 660e8400-e29b-41d4-a716-446655440000
                    status: redirecting
                    redirectUrl: https://iyzico.com/3ds/...
                    message: 3D Secure doÄŸrulamasÄ±na yÃ¶nlendiriliyorsunuz
                wallet_completed:
                  summary: CÃ¼zdan Ã–deme
                  value:
                    paymentId: 660e8400-e29b-41d4-a716-446655440000
                    status: completed
                    message: Ã–deme baÅŸarÄ±yla tamamlandÄ±
        '402':
          description: Yetersiz bakiye
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: CÃ¼zdanÄ±nÄ±zda yetersiz bakiye
                code: INSUFFICIENT_BALANCE
                required: 5000
                current: 2000

  /payments/credit-card:
    post:
      summary: Kredi KartÄ± ile Ã–deme
      description: |
        Direkt kredi kartÄ± bilgileri ile Ã¶deme baÅŸlatÄ±r.
        
        **GÃ¼venlik:**
        - PCI-DSS compliant
        - Kart bilgileri backend'de saklanmaz
        - 3D Secure zorunlu
      tags: [Payments]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, cardDetails, billingAddress]
              properties:
                orderId:
                  type: string
                  format: uuid
                cardDetails:
                  type: object
                  required: [cardNumber, cardName, expireMonth, expireYear, cvc]
                  properties:
                    cardNumber:
                      type: string
                      example: '5528790000000008'
                    cardName:
                      type: string
                      example: JOHN DOE
                    expireMonth:
                      type: string
                      example: '12'
                    expireYear:
                      type: string
                      example: '2030'
                    cvc:
                      type: string
                      example: '123'
                billingAddress:
                  $ref: '#/components/schemas/AddressInput'
                installments:
                  type: integer
                  minimum: 1
                  maximum: 12
                  default: 1
      responses:
        '201':
          description: Ã–deme baÅŸlatÄ±ldÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  paymentId:
                    type: string
                    format: uuid
                  redirectUrl:
                    type: string
                    format: uri
                  threeDsHtml:
                    type: string
                    description: 3D Secure HTML formu

  /payments/{paymentId}/status:
    get:
      summary: Ã–deme Durumu
      description: |
        Ã–deme durumunu kontrol eder.
        
        **KullanÄ±m:**
        - 3D Secure sonrasÄ± durum kontrolÃ¼
        - Polling iÃ§in (pending Ã¶demeler)
      tags: [Payments]
      security:
        - bearerAuth: []
      parameters:
        - name: paymentId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Ã–deme durumu
          content:
            application/json:
              schema:
                type: object
                properties:
                  paymentId:
                    type: string
                    format: uuid
                  orderId:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum: [pending, processing, completed, failed, refunded]
                  method:
                    type: string
                  amount:
                    type: integer
                    description: KuruÅŸ cinsinden
                  currency:
                    type: string
                    example: TRY
                  providerTransactionId:
                    type: string
                  errorMessage:
                    type: string
                    nullable: true
                  createdAt:
                    type: string
                    format: date-time
                  completedAt:
                    type: string
                    format: date-time
                    nullable: true

  /payments/refund:
    post:
      summary: Ä°ade Talebi
      description: |
        Ã–deme iadesi baÅŸlatÄ±r.
        
        **KoÅŸullar:**
        - Ã–deme completed durumunda olmalÄ±
        - KÄ±smi veya tam iade yapÄ±labilir
        - Admin onayÄ± gerekebilir
      tags: [Payments]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [paymentId]
              properties:
                paymentId:
                  type: string
                  format: uuid
                amount:
                  type: integer
                  description: KuruÅŸ cinsinden. BoÅŸsa tam iade.
                reason:
                  type: string
                  maxLength: 500
      responses:
        '200':
          description: Ä°ade iÅŸlemi baÅŸlatÄ±ldÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  refundId:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum: [pending, processing, completed]
                  amount:
                    type: integer
                  message:
                    type: string

  /payments/callback:
    post:
      summary: Ã–deme Provider Callback
      description: |
        **WEBHOOK ENDPOINT**
        
        Payment provider'lar (Iyzico, vb.) bu endpoint'e callback gÃ¶nderir.
        
        **GÃ¼venlik:**
        - Signature validation
        - IP whitelist
      tags: [Payments]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                orderId:
                  type: string
                  format: uuid
                paymentId:
                  type: string
                  format: uuid
                status:
                  type: string
                transactionId:
                  type: string
                errorMessage:
                  type: string
      responses:
        '200':
          description: Callback iÅŸlendi
        '400':
          description: GeÃ§ersiz callback data

  # =============================================================================
  # DESIGNERS
  # =============================================================================
  /designers:
    get:
      summary: TasarÄ±mcÄ±larÄ± Listele
      description: |
        Aktif tasarÄ±mcÄ±larÄ± listeler (authenticated users iÃ§in).
        
        **Filtreleme:**
        - skill, rating, availability
      tags: [Designers]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: skill
          in: query
          schema:
            type: string
        - name: minRating
          in: query
          schema:
            type: number
            minimum: 1
            maximum: 5
      responses:
        '200':
          description: TasarÄ±mcÄ± listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  designers:
                    type: array
                    items:
                      $ref: '#/components/schemas/Designer'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /designers/recommended:
    get:
      summary: Ã–nerilen TasarÄ±mcÄ±lar
      description: |
        KullanÄ±cÄ±ya Ã¶zel Ã¶nerilen tasarÄ±mcÄ±lar.
        
        **Algoritma:**
        - User preferences
        - Past orders
        - Rating & availability
      tags: [Designers]
      security:
        - bearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Ã–nerilen tasarÄ±mcÄ±lar
          content:
            application/json:
              schema:
                type: object
                properties:
                  slate:
                    type: array
                    items:
                      $ref: '#/components/schemas/Designer'
                    description: Ãœst sÄ±ra Ã¶nerileri
                  rest:
                    type: array
                    items:
                      $ref: '#/components/schemas/Designer'
                    description: DiÄŸer Ã¶neriler

  /designers/public/{id}:
    get:
      summary: TasarÄ±mcÄ± Public Profil
      description: |
        TasarÄ±mcÄ±nÄ±n public profili (authentication gerekmez).
        
        **Ä°Ã§erik:**
        - Portfolio
        - Reviews
        - Stats (avg rating, completed orders)
      tags: [Designers]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: TasarÄ±mcÄ± profili
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  name:
                    type: string
                  avatarUrl:
                    type: string
                    nullable: true
                  bio:
                    type: string
                  skills:
                    type: array
                    items:
                      type: string
                  portfolio:
                    type: array
                    items:
                      type: object
                      properties:
                        imageUrl:
                          type: string
                        title:
                          type: string
                  stats:
                    type: object
                    properties:
                      averageRating:
                        type: number
                      totalReviews:
                        type: integer
                      completedOrders:
                        type: integer
                  reviews:
                    type: array
                    items:
                      $ref: '#/components/schemas/Review'

  /designers/public:
    get:
      summary: TasarÄ±mcÄ± Public Arama
      description: Public tasarÄ±mcÄ± arama (authentication gerekmez)
      tags: [Designers]
      parameters:
        - name: q
          in: query
          schema:
            type: string
        - name: skill
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Arama sonuÃ§larÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  designers:
                    type: array
                    items:
                      $ref: '#/components/schemas/Designer'

  /designers/{id}/reviews:
    get:
      summary: TasarÄ±mcÄ± YorumlarÄ±
      description: TasarÄ±mcÄ±nÄ±n aldÄ±ÄŸÄ± yorumlarÄ± listeler
      tags: [Designers]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Yorum listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  reviews:
                    type: array
                    items:
                      $ref: '#/components/schemas/Review'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      summary: TasarÄ±mcÄ± Yorumu Ekle
      description: |
        TamamlanmÄ±ÅŸ sipariÅŸ sonrasÄ± tasarÄ±mcÄ±yÄ± deÄŸerlendirin.
        
        **KoÅŸul:** KullanÄ±cÄ±nÄ±n tasarÄ±mcÄ± ile tamamlanmÄ±ÅŸ sipariÅŸi olmalÄ±
      tags: [Designers]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [rating]
              properties:
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
                comment:
                  type: string
                  maxLength: 500
      responses:
        '201':
          description: Yorum eklendi
        '400':
          description: Bu tasarÄ±mcÄ± ile tamamlanmÄ±ÅŸ sipariÅŸiniz yok

  # =============================================================================
  # ADDRESSES
  # =============================================================================
  /addresses:
    get:
      summary: Adreslerimi Listele
      description: |
        KullanÄ±cÄ±nÄ±n kayÄ±tlÄ± adreslerini listeler.
        
        **Limit:** KullanÄ±cÄ± baÅŸÄ±na maksimum 10 adres
      tags: [Addresses]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Adres listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  addresses:
                    type: array
                    items:
                      $ref: '#/components/schemas/Address'
                  total:
                    type: integer

    post:
      summary: Yeni Adres Ekle
      description: |
        Yeni teslimat adresi ekler.
        
        **Validasyon:**
        - TÃ¼m zorunlu alanlar dolu olmalÄ±
        - Telefon numarasÄ± geÃ§erli format
      tags: [Addresses]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressInput'
      responses:
        '201':
          description: Adres eklendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '400':
          description: Maksimum adres limitine ulaÅŸÄ±ldÄ±

  /addresses/default:
    get:
      summary: VarsayÄ±lan Adres
      description: KullanÄ±cÄ±nÄ±n varsayÄ±lan adresini getirir
      tags: [Addresses]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: VarsayÄ±lan adres
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          description: VarsayÄ±lan adres belirtilmemiÅŸ

  /addresses/{id}:
    get:
      summary: Adres Detay
      description: Belirli bir adresin detaylarÄ±nÄ± getirir
      tags: [Addresses]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Adres detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'
        '404':
          $ref: '#/components/responses/NotFound'

    put:
      summary: Adres GÃ¼ncelle
      description: Mevcut adresi gÃ¼nceller
      tags: [Addresses]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddressInput'
      responses:
        '200':
          description: Adres gÃ¼ncellendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Address'

    delete:
      summary: Adres Sil
      description: |
        Adresi siler.
        
        **Not:** VarsayÄ±lan adres silinemez (Ã¶nce baÅŸka bir adresi varsayÄ±lan yapÄ±n)
      tags: [Addresses]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Adres silindi
        '400':
          description: VarsayÄ±lan adres silinemez

  /addresses/{id}/default:
    post:
      summary: VarsayÄ±lan Adres Yap
      description: Bu adresi varsayÄ±lan adres olarak belirler
      tags: [Addresses]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: VarsayÄ±lan adres gÃ¼ncellendi

  # =============================================================================
  # WALLET
  # =============================================================================
  /wallet:
    get:
      summary: CÃ¼zdan Bakiyem
      description: |
        KullanÄ±cÄ±nÄ±n mevcut kredi bakiyesini getirir.
        
        **Kredi Sistemi:**
        - 1 kredi â‰ˆ 0.01 TL
        - AI generation, custom orders iÃ§in kullanÄ±lÄ±r
      tags: [Wallet]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: CÃ¼zdan bakiyesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  balance:
                    type: integer
                    description: Mevcut kredi
                  balanceTRY:
                    type: number
                    description: TL karÅŸÄ±lÄ±ÄŸÄ±
                  userId:
                    type: string
                    format: uuid

  /wallet/history:
    get:
      summary: Ä°ÅŸlem GeÃ§miÅŸi
      description: |
        Kredi transaction geÃ§miÅŸini getirir.
        
        **Filtreleme:**
        - type: spend, refund, purchase, gift
        - date range
      tags: [Wallet]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: type
          in: query
          schema:
            type: string
            enum: [all, spend, refund, purchase, gift]
            default: all
      responses:
        '200':
          description: Transaction geÃ§miÅŸi
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        delta:
                          type: integer
                          description: '+' iÃ§in artÄ±ÅŸ, '-' iÃ§in azalÄ±ÅŸ
                        type:
                          type: string
                          enum: [spend, refund, purchase, gift]
                        note:
                          type: string
                        balanceAfter:
                          type: integer
                        createdAt:
                          type: string
                          format: date-time
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /wallet/stats:
    get:
      summary: CÃ¼zdan Ä°statistikleri
      description: |
        Toplam harcama, kazanÃ§, vs. istatistikleri getirir.
      tags: [Wallet]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: CÃ¼zdan istatistikleri
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalSpent:
                    type: integer
                  totalRefunded:
                    type: integer
                  totalPurchased:
                    type: integer
                  totalGifted:
                    type: integer

  /wallet/purchase:
    post:
      summary: Kredi SatÄ±n Al
      description: |
        Kredi paketi satÄ±n alÄ±r.
        
        **Paketler:**
        - basic: 300 kredi - 50 TL
        - standard: 500 kredi - 100 TL
        - premium: 1000 kredi - 200 TL
        
        **Rate Limit:** 5 purchase/saat
      tags: [Wallet]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [packageType]
              properties:
                packageType:
                  type: string
                  enum: [basic, standard, premium]
            examples:
              basic:
                summary: Basic Paket
                value:
                  packageType: basic
              premium:
                summary: Premium Paket
                value:
                  packageType: premium
      responses:
        '200':
          description: Payment baÅŸlatÄ±ldÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  paymentId:
                    type: string
                    format: uuid
                  redirectUrl:
                    type: string
                    format: uri
                  package:
                    type: object
                    properties:
                      type:
                        type: string
                      credits:
                        type: integer
                      price:
                        type: integer
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /wallet/grant:
    post:
      summary: Kredi Ver (Admin)
      description: |
        **ADMIN ONLY**
        
        KullanÄ±cÄ±ya manuel kredi verir.
        
        **KullanÄ±m:**
        - Kampanyalar
        - Telafi
        - Test
      tags: [Wallet]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId, amount]
              properties:
                userId:
                  type: string
                  format: uuid
                amount:
                  type: integer
                  minimum: 1
                  maximum: 10000
                note:
                  type: string
                  maxLength: 200
      responses:
        '200':
          description: Kredi verildi
        '403':
          $ref: '#/components/responses/Forbidden'

  # =============================================================================
  # SHIPMENTS
  # =============================================================================
  /shipments/carriers:
    get:
      summary: Kargo FirmalarÄ± Listesi
      description: |
        Desteklenen kargo firmalarÄ±nÄ± listeler.
        
        **Public endpoint** - Authentication gerekmez
      tags: [Shipments]
      responses:
        '200':
          description: Kargo firmalarÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  carriers:
                    type: array
                    items:
                      type: object
                      properties:
                        code:
                          type: string
                          example: yurtici
                        name:
                          type: string
                          example: YurtiÃ§i Kargo
                        trackingUrlTemplate:
                          type: string
                          example: 'https://kargotakip.yurticikargo.com/{trackingNumber}'

  /shipments/public/{id}/events:
    get:
      summary: Public Kargo Takip
      description: |
        **Public endpoint** - SipariÅŸ sahibi olmayan kullanÄ±cÄ±lar iÃ§in.
        
        **GÃ¼venlik:**
        - IP based rate limiting (10 req/min)
        - Optional: verification token gerekebilir
      tags: [Shipments]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: verificationToken
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Kargo durumu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShipmentEvents'
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /shipments/orders/{id}/shipments:
    get:
      summary: SipariÅŸ Kargo Bilgileri
      description: |
        SipariÅŸe ait tÃ¼m kargo kayÄ±tlarÄ±nÄ± getirir.
        
        **Yetki:** Sadece sipariÅŸ sahibi
      tags: [Shipments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Kargo listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  shipments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Shipment'

    post:
      summary: Kargo OluÅŸtur (Admin)
      description: |
        **ADMIN ONLY**
        
        SipariÅŸ iÃ§in kargo kaydÄ± oluÅŸturur.
      tags: [Shipments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [carrierCode, trackingNumber]
              properties:
                carrierCode:
                  type: string
                  example: yurtici
                carrierName:
                  type: string
                  example: YurtiÃ§i Kargo
                trackingNumber:
                  type: string
                  example: YT12345678
      responses:
        '201':
          description: Kargo oluÅŸturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Shipment'

  /shipments/{id}/events:
    get:
      summary: Kargo OlaylarÄ± (Authenticated)
      description: |
        Kargo tracking olaylarÄ±nÄ± getirir.
        
        **Yetki:** SipariÅŸ sahibi
      tags: [Shipments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Kargo olaylarÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShipmentEvents'

  /shipments/{id}/sync:
    post:
      summary: Kargo Durumu Senkronize Et (Admin)
      description: |
        **ADMIN ONLY**
        
        Kargo provider'dan gÃ¼ncel durumu Ã§eker.
      tags: [Shipments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Senkronizasyon baÅŸarÄ±lÄ±

  /shipments/webhook/{provider}:
    post:
      summary: Kargo Provider Webhook
      description: |
        **WEBHOOK ENDPOINT**
        
        Kargo firmalarÄ± durum gÃ¼ncellemelerini buraya gÃ¶nderir.
        
        **GÃ¼venlik:**
        - Signature validation
        - IP whitelist
      tags: [Shipments]
      parameters:
        - name: provider
          in: path
          required: true
          schema:
            type: string
            enum: [mock, yurtici, aras, ptt]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Webhook iÅŸlendi

  # =============================================================================
  # TEMPLATES
  # =============================================================================
  /templates:
    get:
      summary: Åablon Listesi
      description: |
        TasarÄ±m ÅŸablonlarÄ±nÄ± listeler.
        
        **Public endpoint** - Authentication gerekmez
        
        **Filtreleme:**
        - category, tag, isPublished
      tags: [Templates]
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: category
          in: query
          schema:
            type: string
        - name: tag
          in: query
          schema:
            type: string
        - name: isPublished
          in: query
          schema:
            type: boolean
            default: true
      responses:
        '200':
          description: Åablon listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  templates:
                    type: array
                    items:
                      $ref: '#/components/schemas/Template'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      summary: Yeni Åablon OluÅŸtur
      description: |
        **DESIGNER or ADMIN**
        
        Yeni tasarÄ±m ÅŸablonu oluÅŸturur.
      tags: [Templates]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, slug]
              properties:
                name:
                  type: string
                slug:
                  type: string
                  pattern: '^[a-z0-9-]+
                description:
                  type: string
                thumbnailUrl:
                  type: string
                categoryId:
                  type: integer
                tags:
                  type: array
                  items:
                    type: string
                isPublished:
                  type: boolean
                  default: false
      responses:
        '201':
          description: Åablon oluÅŸturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Template'

  /templates/popular:
    get:
      summary: PopÃ¼ler Åablonlar
      description: En Ã§ok kullanÄ±lan ÅŸablonlarÄ± getirir
      tags: [Templates]
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
            maximum: 50
      responses:
        '200':
          description: PopÃ¼ler ÅŸablonlar
          content:
            application/json:
              schema:
                type: object
                properties:
                  templates:
                    type: array
                    items:
                      $ref: '#/components/schemas/Template'

  /templates/slug/{slug}:
    get:
      summary: Åablon Detay (Slug ile)
      description: Slug ile ÅŸablon detayÄ±nÄ± getirir
      tags: [Templates]
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Åablon detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'
        '404':
          $ref: '#/components/responses/NotFound'

  /templates/{id}:
    get:
      summary: Åablon Detay (ID ile)
      description: UUID ile ÅŸablon detayÄ±nÄ± getirir
      tags: [Templates]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Åablon detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemplateDetail'

    put:
      summary: Åablon GÃ¼ncelle
      description: |
        **DESIGNER or ADMIN**
        
        Åablon bilgilerini gÃ¼nceller.
      tags: [Templates]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                isPublished:
                  type: boolean
      responses:
        '200':
          description: Åablon gÃ¼ncellendi

    delete:
      summary: Åablon Sil (Admin)
      description: |
        **ADMIN ONLY**
        
        Åablonu siler (soft delete).
      tags: [Templates]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Åablon silindi

  # =============================================================================
  # CATEGORIES
  # =============================================================================
  /categories:
    get:
      summary: Kategori Listesi
      description: |
        ÃœrÃ¼n kategorilerini listeler.
        
        **Public endpoint** - Authentication gerekmez
      tags: [Categories]
      responses:
        '200':
          description: Kategori listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  categories:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'

    post:
      summary: Yeni Kategori OluÅŸtur (Admin)
      description: |
        **ADMIN ONLY**
      tags: [Categories]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, slug]
              properties:
                name:
                  type: string
                slug:
                  type: string
                  pattern: '^[a-z0-9-]+
                description:
                  type: string
      responses:
        '201':
          description: Kategori oluÅŸturuldu

  /categories/{id}:
    get:
      summary: Kategori Detay
      description: Kategori detayÄ±nÄ± ve iÃ§indeki ÅŸablonlarÄ± getirir
      tags: [Categories]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Kategori detayÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  category:
                    $ref: '#/components/schemas/Category'
                  templates:
                    type: array
                    items:
                      $ref: '#/components/schemas/Template'

    put:
      summary: Kategori GÃ¼ncelle (Admin)
      description: |
        **ADMIN ONLY**
      tags: [Categories]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: Kategori gÃ¼ncellendi

    delete:
      summary: Kategori Sil (Admin)
      description: |
        **ADMIN ONLY**
      tags: [Categories]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        '204':
          description: Kategori silindi

  # =============================================================================
  # SEARCH
  # =============================================================================
  /search:
    get:
      summary: Global Arama
      description: |
        Åablonlar, tasarÄ±mcÄ±lar ve projeler iÃ§inde arama yapar.
        
        **Rate Limit:** 30 req/dakika
      tags: [Search]
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
            maxLength: 100
        - name: type
          in: query
          schema:
            type: string
            enum: [all, templates, projects, designers]
            default: all
        - name: category
          in: query
          schema:
            type: string
            maxLength: 50
        - name: tag
          in: query
          schema:
            type: string
            maxLength: 50
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Arama sonuÃ§larÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  query:
                    type: string
                  results:
                    type: object
                    properties:
                      templates:
                        type: array
                        items:
                          $ref: '#/components/schemas/Template'
                      designers:
                        type: array
                        items:
                          $ref: '#/components/schemas/Designer'
                      projects:
                        type: array
                        items:
                          $ref: '#/components/schemas/Project'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /search/suggestions:
    get:
      summary: Arama Ã–nerileri
      description: |
        Autocomplete iÃ§in arama Ã¶nerileri.
        
        **Rate Limit:** 60 req/dakika
      tags: [Search]
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
            maxLength: 50
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 20
            default: 10
      responses:
        '200':
          description: Ã–neriler
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggestions:
                    type: array
                    items:
                      type: object
                      properties:
                        text:
                          type: string
                        type:
                          type: string
                          enum: [template, designer, tag, category]
                        count:
                          type: integer

  # =============================================================================
  # AI GENERATION
  # =============================================================================
  /ai/templates:
    get:
      summary: AI ÅablonlarÄ±
      description: |
        AI iÃ§in hazÄ±r prompt ÅŸablonlarÄ±nÄ± listeler.
        
        **Public endpoint**
      tags: [AI]
      responses:
        '200':
          description: AI ÅŸablonlarÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  templates:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                        promptTemplate:
                          type: string
                        variables:
                          type: array
                          items:
                            type: string

  /ai/templates/render:
    post:
      summary: AI Åablon Render
      description: Åablon deÄŸiÅŸkenlerini doldurarak final prompt oluÅŸturur
      tags: [AI]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [templateId, fields]
              properties:
                templateId:
                  type: string
                fields:
                  type: object
                  additionalProperties: true
      responses:
        '200':
          description: Render edilmiÅŸ prompt
          content:
            application/json:
              schema:
                type: object
                properties:
                  renderedPrompt:
                    type: string

  /drafts/{id}/ai/generate:
    post:
      summary: AI ile Ãœretim BaÅŸlat
      description: |
        Draft iÃ§in AI Ã¼retimi baÅŸlatÄ±r.
        
        **Maliyet:** 50 kredi per generation
        
        **AkÄ±ÅŸ:**
        1. Job queue'ya eklenir
        2. Stability AI API Ã§aÄŸrÄ±sÄ±
        3. Watermark ekleme
        4. SonuÃ§ storage'a kaydedilir
      tags: [AI]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                templateId:
                  type: string
                fields:
                  type: object
                count:
                  type: integer
                  minimum: 1
                  maximum: 4
                  default: 1
      responses:
        '202':
          description: Ãœretim baÅŸlatÄ±ldÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  jobId:
                    type: string
                    format: uuid
                  status:
                    type: string
                    enum: [queued, processing]
                  creditsUsed:
                    type: integer
                  estimatedTime:
                    type: integer
                    description: Saniye cinsinden
        '402':
          $ref: '#/components/responses/PaymentRequired'

  /drafts/{id}/ai/results:
    get:
      summary: AI SonuÃ§larÄ±
      description: Draft iÃ§in oluÅŸturulmuÅŸ AI sonuÃ§larÄ±nÄ± getirir
      tags: [AI]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/DraftIdParam'
      responses:
        '200':
          description: AI sonuÃ§larÄ±
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    enum: [pending, processing, completed, failed]
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          format: uuid
                        imageUrl:
                          type: string
                        watermarkedUrl:
                          type: string
                        createdAt:
                          type: string
                          format: date-time
                  selectedResultId:
                    type: string
                    format: uuid
                    nullable: true

  # =============================================================================
  # LIKES
  # =============================================================================
  /likes/toggle:
    post:
      summary: BeÄŸeni Toggle
      description: |
        Mesaj kartÄ±nÄ± beÄŸenir veya beÄŸeniyi kaldÄ±rÄ±r.
        
        **Rate Limit:** 60 req/dakika
      tags: [Likes]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [messageCardId]
              properties:
                messageCardId:
                  type: string
                  format: uuid
      responses:
        '200':
          description: BeÄŸeni durumu
          content:
            application/json:
              schema:
                type: object
                properties:
                  liked:
                    type: boolean
                  totalLikes:
                    type: integer
                  message:
                    type: string

  /likes/cards/{id}/summary:
    get:
      summary: BeÄŸeni Ã–zeti
      description: |
        Mesaj kartÄ±nÄ±n beÄŸeni sayÄ±sÄ±nÄ± getirir.
        
        **Public endpoint**
      tags: [Likes]
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: BeÄŸeni Ã¶zeti
          content:
            application/json:
              schema:
                type: object
                properties:
                  messageCardId:
                    type: string
                    format: uuid
                  totalLikes:
                    type: integer
                  recentLikes:
                    type: integer
                    description: Son 24 saatteki beÄŸeni sayÄ±sÄ±

  # =============================================================================
  # MESSAGE CARDS
  # =============================================================================
  /message-cards/popular:
    get:
      summary: PopÃ¼ler Mesaj KartlarÄ±
      description: |
        En Ã§ok beÄŸenilen mesaj kartlarÄ±nÄ± listeler.
        
        **Public endpoint**
      tags: [Message Cards]
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
            maximum: 50
      responses:
        '200':
          description: PopÃ¼ler kartlar
          content:
            application/json:
              schema:
                type: object
                properties:
                  cards:
                    type: array
                    items:
                      $ref: '#/components/schemas/MessageCard'

  # =============================================================================
  # COMMENTS (PROJECT)
  # =============================================================================
  /comments:
    get:
      summary: Yorum Listele
      description: Proje yorumlarÄ±nÄ± listeler
      tags: [Comments]
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: layerId
          in: query
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          schema:
            type: string
            enum: [open, resolved]
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Yorum listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      $ref: '#/components/schemas/Comment'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      summary: Yorum Ekle
      description: Projeye yeni yorum ekler
      tags: [Comments]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [projectId, body]
              properties:
                projectId:
                  type: string
                  format: uuid
                body:
                  type: string
                  minLength: 1
                  maxLength: 2000
                targetLayerId:
                  type: string
                  format: uuid
                rating:
                  type: integer
                  minimum: 1
                  maximum: 5
      responses:
        '201':
          description: Yorum eklendi
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'

  /comments/{id}:
    get:
      summary: Yorum Detay
      description: Belirli bir yorumun detayÄ±nÄ± getirir
      tags: [Comments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Yorum detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Comment'

    put:
      summary: Yorum GÃ¼ncelle
      description: |
        Yorumu gÃ¼nceller.
        
        **Yetki:** Yorum sahibi veya proje owner'Ä±
      tags: [Comments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                body:
                  type: string
                status:
                  type: string
                  enum: [open, resolved]
                rating:
                  type: integer
      responses:
        '200':
          description: Yorum gÃ¼ncellendi

    delete:
      summary: Yorum Sil
      description: |
        Yorumu siler.
        
        **Yetki:** Yorum sahibi veya proje owner'Ä±
      tags: [Comments]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Yorum silindi

  /comments/projects/{projectId}/stats:
    get:
      summary: Proje Yorum Ä°statistikleri
      description: Projenin yorum istatistiklerini getirir
      tags: [Comments]
      security:
        - bearerAuth: []
      parameters:
        - name: projectId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Ä°statistikler
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                  open:
                    type: integer
                  resolved:
                    type: integer
                  averageRating:
                    type: number

  # =============================================================================
  # NOTIFICATIONS
  # =============================================================================
  /notifications:
    get:
      summary: Bildirimlerimi Listele
      description: KullanÄ±cÄ±nÄ±n bildirimlerini listeler
      tags: [Notifications]
      security:
        - bearerAuth: []
      parameters:
        - name: read
          in: query
          schema:
            type: boolean
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Bildirim listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
                  unreadCount:
                    type: integer
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /notifications/{id}/read:
    put:
      summary: Bildirimi Okundu Ä°ÅŸaretle
      description: Belirli bir bildirimi okundu olarak iÅŸaretler
      tags: [Notifications]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Bildirim iÅŸaretlendi

  /notifications/mark-all-read:
    put:
      summary: TÃ¼m Bildirimleri Okundu Ä°ÅŸaretle
      description: TÃ¼m bildirimleri okundu olarak iÅŸaretler
      tags: [Notifications]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: TÃ¼m bildirimler iÅŸaretlendi

  # =============================================================================
  # PROJECTS
  # =============================================================================
  /projects:
    get:
      summary: Projelerimi Listele
      description: KullanÄ±cÄ±nÄ±n eriÅŸebildiÄŸi projeleri listeler
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: status
          in: query
          schema:
            type: string
            enum: [active, archived, deleted]
      responses:
        '200':
          description: Proje listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  projects:
                    type: array
                    items:
                      $ref: '#/components/schemas/Project'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      summary: Yeni Proje OluÅŸtur
      description: Yeni bir proje oluÅŸturur
      tags: [Projects]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [title]
              properties:
                title:
                  type: string
                  minLength: 1
                  maxLength: 200
                orgId:
                  type: string
                  format: uuid
                meta:
                  type: object
      responses:
        '201':
          description: Proje oluÅŸturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'

  /projects/{id}:
    get:
      summary: Proje Detay
      description: Proje detaylarÄ±nÄ± getirir
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Proje detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectDetail'

    put:
      summary: Proje GÃ¼ncelle
      description: Proje bilgilerini gÃ¼nceller
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                status:
                  type: string
                  enum: [active, archived, deleted]
      responses:
        '200':
          description: Proje gÃ¼ncellendi

    delete:
      summary: Proje Sil
      description: Projeyi siler (soft delete)
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Proje silindi

  /projects/{id}/members:
    get:
      summary: Proje Ãœyeleri
      description: Projenin Ã¼yelerini listeler
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Ãœye listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  members:
                    type: array
                    items:
                      type: object
                      properties:
                        userId:
                          type: string
                          format: uuid
                        role:
                          type: string
                        joinedAt:
                          type: string
                          format: date-time

    post:
      summary: Proje Ãœyesi Ekle
      description: Projeye yeni Ã¼ye ekler
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [userId]
              properties:
                userId:
                  type: string
                  format: uuid
                role:
                  type: string
                  default: editor
      responses:
        '201':
          description: Ãœye eklendi

  /projects/{id}/members/{userId}:
    delete:
      summary: Proje Ãœyesi Ã‡Ä±kar
      description: Ãœyeyi projeden Ã§Ä±karÄ±r
      tags: [Projects]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: userId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Ãœye Ã§Ä±karÄ±ldÄ±

  # =============================================================================
  # ORGANIZATIONS
  # =============================================================================
  /organizations:
    get:
      summary: OrganizasyonlarÄ±m
      description: KullanÄ±cÄ±nÄ±n Ã¼yesi olduÄŸu organizasyonlarÄ± listeler
      tags: [Organizations]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Organizasyon listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  organizations:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'

    post:
      summary: Yeni Organizasyon OluÅŸtur
      description: Yeni bir organizasyon oluÅŸturur
      tags: [Organizations]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, slug]
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                slug:
                  type: string
                  pattern: '^[a-z0-9-]+
      responses:
        '201':
          description: Organizasyon oluÅŸturuldu

  /organizations/{id}:
    get:
      summary: Organizasyon Detay
      description: Organizasyon detaylarÄ±nÄ± getirir
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Organizasyon detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'

    delete:
      summary: Organizasyon Sil
      description: Organizasyonu siler
      tags: [Organizations]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Organizasyon silindi

  # =============================================================================
  # RETURNS
  # =============================================================================
  /returns:
    get:
      summary: Ä°ade Taleplerim
      description: KullanÄ±cÄ±nÄ±n iade taleplerini listeler
      tags: [Returns]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Ä°ade listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  returns:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReturnRequest'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

    post:
      summary: Ä°ade Talebi OluÅŸtur
      description: |
        SipariÅŸ iÃ§in iade talebi oluÅŸturur.
        
        **KoÅŸullar:**
        - SipariÅŸ teslim edilmiÅŸ olmalÄ±
        - 14 gÃ¼n iÃ§inde talep edilmeli
      tags: [Returns]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [orderId, reason]
              properties:
                orderId:
                  type: string
                  format: uuid
                reason:
                  type: string
                  minLength: 10
                  maxLength: 500
                note:
                  type: string
                  maxLength: 1000
      responses:
        '201':
          description: Ä°ade talebi oluÅŸturuldu
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReturnRequest'

  /returns/{id}/status:
    put:
      summary: Ä°ade Durumu GÃ¼ncelle (Admin)
      description: |
        **ADMIN ONLY**
        
        Ä°ade talebinin durumunu gÃ¼nceller.
      tags: [Returns]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [status]
              properties:
                status:
                  type: string
                  enum: [requested, approved, rejected, received, refunded, canceled]
                note:
                  type: string
      responses:
        '200':
          description: Durum gÃ¼ncellendi

  # =============================================================================
  # ASSETS
  # =============================================================================
  /assets:
    get:
      summary: VarlÄ±klarÄ±m
      description: |
        KullanÄ±cÄ±nÄ±n yÃ¼klediÄŸi dosyalarÄ± listeler.
        
        **Filtreleme:**
        - kind (cover, profile, etc.)
        - mimeType
      tags: [Assets]
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: kind
          in: query
          schema:
            type: string
        - name: mimeType
          in: query
          schema:
            type: string
      responses:
        '200':
          description: Asset listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  assets:
                    type: array
                    items:
                      $ref: '#/components/schemas/Asset'
                  pagination:
                    $ref: '#/components/schemas/Pagination'

  /assets/{id}:
    get:
      summary: Asset Detay
      description: Belirli bir asset'in detaylarÄ±nÄ± getirir
      tags: [Assets]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Asset detayÄ±
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Asset'

    delete:
      summary: Asset Sil
      description: Asset'i siler (dosya ve kayÄ±t)
      tags: [Assets]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Asset silindi

  /assets/stats:
    get:
      summary: Storage Ä°statistikleri
      description: KullanÄ±cÄ±nÄ±n storage kullanÄ±m istatistiklerini getirir
      tags: [Assets]
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Ä°statistikler
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalSize:
                    type: integer
                    description: Byte cinsinden
                  totalFiles:
                    type: integer
                  quota:
                    type: integer
                    description: Byte cinsinden quota
                  usagePercent:
                    type: number

  # =============================================================================
  # LOCATIONS (Turkish Address Hierarchy)
  # =============================================================================
  /locations/provinces:
    get:
      summary: Ä°l Listesi
      description: |
        TÃ¼rkiye illerini listeler.
        
        **Public endpoint**
      tags: [Locations]
      responses:
        '200':
          description: Ä°l listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  provinces:
                    type: array
                    items:
                      $ref: '#/components/schemas/Province'

  /locations/towns:
    get:
      summary: Ä°lÃ§e Listesi
      description: Belirtilen ile ait ilÃ§eleri listeler
      tags: [Locations]
      parameters:
        - name: provinceId
          in: query
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Ä°lÃ§e listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  towns:
                    type: array
                    items:
                      $ref: '#/components/schemas/Town'

  /locations/districts:
    get:
      summary: Semt/Bucak Listesi
      description: Belirtilen ilÃ§eye ait semt/bucaklarÄ± listeler
      tags: [Locations]
      parameters:
        - name: townId
          in: query
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Semt listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  districts:
                    type: array
                    items:
                      $ref: '#/components/schemas/District'

  /locations/quarters:
    get:
      summary: Mahalle Listesi
      description: Belirtilen semte ait mahalleleri listeler
      tags: [Locations]
      parameters:
        - name: districtId
          in: query
          required: true
          schema:
            type: integer
      responses:
        '200':
          description: Mahalle listesi
          content:
            application/json:
              schema:
                type: object
                properties:
                  quarters:
                    type: array
                    items:
                      $ref: '#/components/schemas/Quarter'

  # =============================================================================
  # CONTACT
  # =============================================================================
  /contact:
    post:
      summary: Ä°letiÅŸim Formu GÃ¶nder
      description: |
        Ä°letiÅŸim formu gÃ¶nderir.
        
        **Rate Limit:** 3 mesaj/saat
      tags: [Contact]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [name, email, subject, message]
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 100
                email:
                  type: string
                  format: email
                subject:
                  type: string
                  minLength: 5
                  maxLength: 200
                message:
                  type: string
                  minLength: 10
                  maxLength: 2000
      responses:
        '200':
          description: Mesaj gÃ¶nderildi
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: MesajÄ±nÄ±z baÅŸarÄ±yla gÃ¶nderildi
        '429':
          $ref: '#/components/responses/TooManyRequests'

# =============================================================================
# COMPONENTS
# =============================================================================
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: |
        Access token authentication. 
        
        **Usage:** `Authorization: Bearer {token}`
        
        Token expire olduÄŸunda `/auth/refresh` endpoint'ini kullanÄ±n.
        
    cookieAuth:
      type: apiKey
      in: cookie
      name: access
      description: |
        Cookie-based authentication.
        
        Browser'da otomatik olarak gÃ¶nderilir.

  parameters:
    PageParam:
      name: page
      in: query
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Sayfa numarasÄ±
      
    LimitParam:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
      description: Sayfa baÅŸÄ±na kayÄ±t sayÄ±sÄ±
      
    DraftIdParam:
      name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Draft UUID'si
      
    OrderIdParam:
      name: id
      in: path
      required: true
      schema:
        type: string
        format: uuid
      description: Order UUID'si

  responses:
    Unauthorized:
      description: Authentication gerekli veya token geÃ§ersiz
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: Unauthorized
            code: UNAUTHORIZED
            
    Forbidden:
      description: Yetki yetersiz
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: Bu iÅŸlem iÃ§in yetkiniz yok
            code: FORBIDDEN
            
    NotFound:
      description: KayÄ±t bulunamadÄ±
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: KayÄ±t bulunamadÄ±
            code: NOT_FOUND
            
    BadRequest:
      description: Validation hatasÄ± veya geÃ§ersiz parametre
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
          example:
            message: Validation failed
            code: VALIDATION_ERROR
            errors:
              - field: email
                message: GeÃ§erli bir email adresi giriniz
              - field: password
                message: Åifre en az 8 karakter olmalÄ±dÄ±r
                
    TooManyRequests:
      description: Rate limit aÅŸÄ±ldÄ±
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: Ã‡ok fazla istek gÃ¶nderdiniz
            code: RATE_LIMIT_EXCEEDED
            retryAfter: 60
            
    PaymentRequired:
      description: Yetersiz kredi/bakiye
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            message: Yetersiz kredi
            code: INSUFFICIENT_CREDITS
            required: 50
            current: 20

  schemas:
    # =============================================================================
    # AUTH SCHEMAS
    # =============================================================================
    RegisterRequest:
      type: object
      required:
        - email
        - password
        - confirmPassword
        - acceptTerms
        - acceptPrivacy
      properties:
        email:
          type: string
          format: email
          example: john@example.com
        password:
          type: string
          minLength: 8
          example: SecureP@ss123
          description: En az 8 karakter, 1 bÃ¼yÃ¼k harf, 1 kÃ¼Ã§Ã¼k harf, 1 rakam, 1 Ã¶zel karakter
        confirmPassword:
          type: string
          example: SecureP@ss123
        name:
          type: string
          minLength: 2
          maxLength: 100
          example: John Doe
        role:
          type: string
          enum: [user, designer]
          default: user
        acceptTerms:
          type: boolean
          description: KullanÄ±m ÅŸartlarÄ±nÄ± kabul edilmeli
        acceptPrivacy:
          type: boolean
          description: Gizlilik politikasÄ±nÄ± kabul edilmeli
        acceptRevenueShare:
          type: boolean
          description: Designer rolÃ¼ iÃ§in gelir paylaÅŸÄ±mÄ± kabul edilmeli
          
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        remember:
          type: boolean
          default: false
          description: True ise cookie'ler persistent olur
          
    LoginResponse:
      type: object
      properties:
        ok:
          type: boolean
          example: true
        accessToken:
          type: string
          description: 15 dakika geÃ§erli
        refreshToken:
          type: string
          description: 30 gÃ¼n geÃ§erli
          
    # =============================================================================
    # USER SCHEMAS
    # =============================================================================
    User:
      type: object
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
        name:
          type: string
          nullable: true
        avatarUrl:
          type: string
          nullable: true
        role:
          type: string
          enum: [user, designer, admin]
        emailVerified:
          type: boolean
        createdAt:
          type: string
          format: date-time
          
    UserProfile:
      allOf:
        - $ref: '#/components/schemas/User'
        - type: object
          properties:
            profile:
              type: object
              nullable: true
              properties:
                phone:
                  type: string
                  nullable: true
                company:
                  type: string
                  nullable: true
                bio:
                  type: string
                  nullable: true
                  
    UpdateProfileRequest:
      type: object
      properties:
        phone:
          type: string
          maxLength: 30
          nullable: true
        company:
          type: string
          maxLength: 100
          nullable: true
        address1:
          type: string
          maxLength: 200
          nullable: true
        address2:
          type: string
          maxLength: 200
          nullable: true
        city:
          type: string
          maxLength: 100
          nullable: true
        state:
          type: string
          maxLength: 100
          nullable: true
        postalCode:
          type: string
          maxLength: 30
          nullable: true
        country:
          type: string
          maxLength: 2
          nullable: true
        preferences:
          type: object
          additionalProperties: true
          nullable: true
          
    # =============================================================================
    # DRAFT SCHEMAS
    # =============================================================================
    Draft:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        method:
          type: string
          enum: [upload, ai, artist]
        step:
          type: integer
          minimum: 1
          maximum: 5
        workflowStatus:
          type: string
          enum: [PENDING, APPROVED, IN_PROGRESS, PREVIEW_SENT, REVISION, COMPLETED, CANCELED]
        messageCardId:
          type: string
          format: uuid
          nullable: true
        assignedDesignerId:
          type: string
          format: uuid
          nullable: true
        revisionCount:
          type: integer
        maxRevisions:
          type: integer
          default: 3
        committedAt:
          type: string
          format: date-time
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          
    # =============================================================================
    # NOTIFICATION SCHEMAS
    # =============================================================================
    Notification:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        type:
          type: string
          enum: [order_update, message, payment, shipment, system]
        title:
          type: string
        body:
          type: string
        payload:
          type: object
          additionalProperties: true
          nullable: true
        read:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
          
    # =============================================================================
    # PROJECT SCHEMAS
    # =============================================================================
    Project:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        ownerId:
          type: string
          format: uuid
        orgId:
          type: string
          format: uuid
          nullable: true
        status:
          type: string
          enum: [active, archived, deleted]
          default: active
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          
    ProjectDetail:
      allOf:
        - $ref: '#/components/schemas/Project'
        - type: object
          properties:
            owner:
              $ref: '#/components/schemas/User'
            members:
              type: array
              items:
                type: object
                properties:
                  user:
                    $ref: '#/components/schemas/User'
                  role:
                    type: string
            meta:
              type: object
              nullable: true
              
    # =============================================================================
    # ORGANIZATION SCHEMAS
    # =============================================================================
    Organization:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        slug:
          type: string
        ownerId:
          type: string
          format: uuid
        memberCount:
          type: integer
        projectCount:
          type: integer
        createdAt:
          type: string
          format: date-time
          
    # =============================================================================
    # RETURN REQUEST SCHEMAS
    # =============================================================================
    ReturnRequest:
      type: object
      properties:
        id:
          type: string
          format: uuid
        orderId:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        reason:
          type: string
        status:
          type: string
          enum: [requested, approved, rejected, received, refunded, canceled]
        note:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          
    # =============================================================================
    # ASSET SCHEMAS
    # =============================================================================
    Asset:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        kind:
          type: string
          example: cover
        filename:
          type: string
        mimeType:
          type: string
          example: image/png
        sizeBytes:
          type: integer
        url:
          type: string
        publicUrl:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
          
    # =============================================================================
    # LOCATION SCHEMAS (Turkish Address)
    # =============================================================================
    Province:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          example: Ä°stanbul
        alpha2Code:
          type: string
          example: '34'
          
    Town:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          example: KadÄ±kÃ¶y
        provinceId:
          type: integer
          
    District:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          example: Moda
        townId:
          type: integer
          
    Quarter:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
          example: CaferaÄŸa Mahallesi
        districtId:
          type: integer
        postalCode:
          type: string
          nullable: true
          
    # =============================================================================
    # PAGINATION SCHEMA
    # =============================================================================
    Pagination:
      type: object
      properties:
        page:
          type: integer
          example: 1
        limit:
          type: integer
          example: 20
        total:
          type: integer
          example: 156
        totalPages:
          type: integer
          example: 8
        hasNext:
          type: boolean
          example: true
        hasPrev:
          type: boolean
          example: false
          
    # =============================================================================
    # ERROR SCHEMAS
    # =============================================================================
    Error:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: Hata mesajÄ±
          example: Bir hata oluÅŸtu
        code:
          type: string
          description: Hata kodu
          example: INTERNAL_ERROR
        statusCode:
          type: integer
          description: HTTP status code
          example: 500
        timestamp:
          type: string
          format: date-time
        path:
          type: string
          description: Ä°stek path'i
          example: /api/v1/orders/123
          
    ValidationError:
      allOf:
        - $ref: '#/components/schemas/Error'
        - type: object
          properties:
            errors:
              type: array
              items:
                type: object
                properties:
                  field:
                    type: string
                    example: email
                  message:
                    type: string
                    example: GeÃ§erli bir email adresi giriniz
                  value:
                    description: GÃ¶nderilen geÃ§ersiz deÄŸer
                    
# =============================================================================
# SECURITY
# =============================================================================
security:
  - bearerAuth: []
  - cookieAuth: []

# =============================================================================
# EXTERNAL DOCUMENTATION
# =============================================================================
externalDocs:
  description: |
    ğŸ“š KapsamlÄ± API DokÃ¼mantasyonu
    
    Daha fazla bilgi, Ã¶rnek kod ve best practices iÃ§in:
  url: https://docs.polikrami.com

# =============================================================================
# ADDITIONAL INFO
# =============================================================================
x-tagGroups:
  - name: Authentication & Users
    tags:
      - Authentication
      - Users
  - name: Core Features
    tags:
      - Drafts
      - Orders
      - Payments
      - Designers
  - name: Content & Media
    tags:
      - Templates
      - Categories
      - Message Cards
      - Assets
  - name: E-Commerce
    tags:
      - Addresses
      - Wallet
      - Shipments
      - Returns
  - name: Collaboration
    tags:
      - Projects
      - Organizations
      - Comments
  - name: Discovery
    tags:
      - Search
      - Likes
      - AI
  - name: System
    tags:
      - Notifications
      - Locations
      - Contact
          format: date-time
          
    DraftDetail:
      allOf:
        - $ref: '#/components/schemas/Draft'
        - type: object
          properties:
            data:
              type: object
              nullable: true
            shipping:
              type: object
              nullable: true
            assignedDesigner:
              $ref: '#/components/schemas/Designer'
              nullable: true
            messageCard:
              $ref: '#/components/schemas/MessageCard'
              nullable: true
              
    # =============================================================================
    # ORDER SCHEMAS
    # =============================================================================
    Order:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        status:
          type: string
          enum: [pending, paid, processing, shipped, delivered, canceled, refunded]
        totalCents:
          type: integer
          description: KuruÅŸ cinsinden toplam tutar
        currency:
          type: string
          example: TRY
        createdAt:
          type: string
          format: date-time
        paidAt:
          type: string
          format: date-time
          nullable: true
          
    OrderDetail:
      allOf:
        - $ref: '#/components/schemas/Order'
        - type: object
          properties:
            lineItems:
              type: array
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                  description:
                    type: string
                  quantity:
                    type: integer
                  priceCents:
                    type: integer
            shippingAddress:
              $ref: '#/components/schemas/Address'
            payment:
              type: object
              nullable: true
              properties:
                id:
                  type: string
                  format: uuid
                method:
                  type: string
                status:
                  type: string
            shipment:
              $ref: '#/components/schemas/Shipment'
              nullable: true
              
    # =============================================================================
    # ADDRESS SCHEMAS
    # =============================================================================
    Address:
      type: object
      properties:
        id:
          type: string
          format: uuid
        label:
          type: string
          nullable: true
          example: Ev
        fullName:
          type: string
          example: John Doe
        phone:
          type: string
          example: '+905551234567'
        line1:
          type: string
          example: AtatÃ¼rk Mah. Ä°stiklal Cad. No:123
        line2:
          type: string
          nullable: true
          example: Daire 4
        city:
          type: string
          example: Ä°stanbul
        district:
          type: string
          nullable: true
          example: KadÄ±kÃ¶y
        postalCode:
          type: string
          nullable: true
          example: '34700'
        country:
          type: string
          example: TR
          default: TR
        isDefault:
          type: boolean
          default: false
        createdAt:
          type: string
          format: date-time
          
    AddressInput:
      type: object
      required:
        - fullName
        - phone
        - line1
        - city
      properties:
        label:
          type: string
          maxLength: 50
          nullable: true
        fullName:
          type: string
          minLength: 2
          maxLength: 100
        phone:
          type: string
          pattern: '^\+?[0-9]{10,15}
        line1:
          type: string
          minLength: 5
          maxLength: 200
        line2:
          type: string
          maxLength: 200
          nullable: true
        city:
          type: string
          minLength: 2
          maxLength: 100
        district:
          type: string
          maxLength: 100
          nullable: true
        postalCode:
          type: string
          pattern: '^\d{5}
          nullable: true
        country:
          type: string
          length: 2
          default: TR
        isDefault:
          type: boolean
          default: false
          
    # =============================================================================
    # DESIGNER SCHEMAS
    # =============================================================================
    Designer:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        email:
          type: string
          format: email
        avatarUrl:
          type: string
          nullable: true
        bio:
          type: string
          nullable: true
        skills:
          type: array
          items:
            type: string
        stats:
          type: object
          properties:
            averageRating:
              type: number
            totalReviews:
              type: integer
            completedOrders:
              type: integer
              
    Review:
      type: object
      properties:
        id:
          type: string
          format: uuid
        designerId:
          type: string
          format: uuid
        reviewerId:
          type: string
          format: uuid
        reviewerName:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 5
        comment:
          type: string
          nullable: true
        createdAt:
          type: string
          format: date-time
          
    # =============================================================================
    # SHIPMENT SCHEMAS
    # =============================================================================
    Shipment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        orderId:
          type: string
          format: uuid
        carrierCode:
          type: string
        carrierName:
          type: string
        trackingNumber:
          type: string
        status:
          type: string
        createdAt:
          type: string
          format: date-time
        lastSyncedAt:
          type: string
          format: date-time
          nullable: true
          
    ShipmentEvents:
      type: object
      properties:
        shipmentId:
          type: string
          format: uuid
        trackingNumber:
          type: string
        status:
          type: string
        events:
          type: array
          items:
            type: object
            properties:
              status:
                type: string
              location:
                type: string
                nullable: true
              description:
                type: string
              timestamp:
                type: string
                format: date-time
                
    # =============================================================================
    # TEMPLATE & CATEGORY SCHEMAS
    # =============================================================================
    Template:
      type: object
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        thumbnailUrl:
          type: string
          nullable: true
        categoryId:
          type: integer
          nullable: true
        isPublished:
          type: boolean
        usageCount:
          type: integer
        createdAt:
          type: string
          format: date-time
          
    TemplateDetail:
      allOf:
        - $ref: '#/components/schemas/Template'
        - type: object
          properties:
            category:
              $ref: '#/components/schemas/Category'
              nullable: true
            tags:
              type: array
              items:
                type: string
                
    Category:
      type: object
      properties:
        id:
          type: integer
        name:
          type: string
        slug:
          type: string
        description:
          type: string
          nullable: true
        templateCount:
          type: integer
          
    # =============================================================================
    # MESSAGE CARD SCHEMAS
    # =============================================================================
    MessageCard:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
        thumbnailUrl:
          type: string
          nullable: true
        priceCents:
          type: integer
        isPublished:
          type: boolean
        likes:
          type: integer
        createdAt:
          type: string
          format: date-time
          
    # =============================================================================
    # COMMENT SCHEMAS
    # =============================================================================
    Comment:
      type: object
      properties:
        id:
          type: string
          format: uuid
        projectId:
          type: string
          format: uuid
        layerId:
          type: string
          format: uuid
          nullable: true
        authorId:
          type: string
          format: uuid
        authorName:
          type: string
        authorAvatar:
          type: string
          nullable: true
        body:
          type: string
        status:
          type: string
          enum: [open, resolved]
        rating:
          type: integer
          minimum: 1
          maximum: 5
          nullable: true
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string